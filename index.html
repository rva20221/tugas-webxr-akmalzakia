<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/n5ro/aframe-physics-system@v4.0.1/dist/aframe-physics-system.min.js"></script>
  <title>Document</title>
</head>
<body>
  <script type="text/javascript" src="scripts.js"></script>
  <a-scene id="scene" background="color: #FAFAFA" renderer="colorManagement: true" physics="debug: true">
    <a-assets>
      <!-- models -->
      <a-asset-item id="cannon_model" src="./models/low-poly_pirate_cannon/scene.gltf"></a-asset-item>
      
      <!-- cannonball / bullet -->
      <a-mixin id="cannonball" geometry="primitive: sphere" material="color: black" scale="0.2 0.2 0.2" disposable></a-mixin>
      
      <!-- cannon -->
      <a-mixin 
        id="cannon" body="type: dynamic; mass: 5; shape:none" 
        shape__barrel="shape:cylinder; height: 3.7; radiusTop: 0.35; radiusBottom: 0.35; orientation: 0 0 0.7071068 0.7071068; offset: .7 1.3 -.08"
        shape__cart="shape:box; halfExtents: 1.5 .5 1; offset: -.1 .5 -.08" 
        gltf-model="#cannon_model" 
        scale="1 1 1" rotation="0 -90 0"
        shootable="bulletScale: 0.2 0.2 0.2">
      </a-mixin>
      <a-mixin id="cannon__shoot-point" position="2.500 1.372 -0.095" rotation="0 90 0 1"></a-mixin>
      
      <!-- cannon variants -->
      <a-mixin id="glbb-cannon" mixin="cannon" shootable="type:glbb" white-cannon></a-mixin>
      <a-mixin id="glb-cannon" mixin="cannon" shootable="type:glb"></a-mixin>
    
    </a-assets>
    <a-camera position="0 2 5">
      <a-cursor></a-cursor>
    </a-camera>
    <a-grid static-body></a-grid>
    <a-entity 
      mixin="glbb-cannon"
      shootable="acceleration:5; initialVelocity:0" 
      position="0 2 0">
      <a-entity mixin="cannon__shoot-point"></a-entity>
    </a-entity>
    <a-sphere dynamic-body position="0 5 -5" radius="1.25" color="#EF2D5E" shadow></a-sphere>
    <a-cylinder position="1 0.75 -3" radius="0.5" height="1.5" color="#FFC65D" shadow></a-cylinder>
  </a-scene>
</body>
</html>